min(df$planted)
filePath = './df250mCorn.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==19)
results <- results %>% filter(planted > 1000)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI,data=results_full_history)
summary(mod)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mCorn.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==19)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
2018-2006
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI,data=results_full_history)
summary(mod)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==12)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI,data=results_full_history)
summary(mod)
mod <- lm(yield ~ NDVI + I(NDVI)^2,data=results_full_history)
summary(mod)
mod <- lm(yield ~ NDVI + I(NDVI^2),data=results_full_history)
summary(mod)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2),data=results_full_history)
summary(mod)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mSoy.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
plot(mod$residuals)
hist(mod$residuals)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mSoy.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df500mSoy.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df500mSoy.csv'
df <- read_csv(filePath)
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df1kmSoy.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mCorn.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df500mCorn.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df1kmCorn.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mWinterWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df500mWinterWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df500mWinterWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
df
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df1kmWinterWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df1kmSpringWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df500mSpringWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mSpringWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df250mWinterWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
filePath = './df1kmWinterWheat.csv'
df <- read_csv(filePath)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
maxNDVI = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, maxNDVI)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
file_path_read = './df250mCorn.csv'
file_path_write = './CornMaxNDVI.csv'
df <- read_csv(file_path_read)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
calulate_max_ndvi = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, calculate_max_ndvi)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
write_csv(results_full_history, file_path_write)
## Test max NDVI
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
file_path_read = './df250mCorn.csv'
file_path_write = './CornMaxNDVI.csv'
df <- read_csv(file_path_read)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
calculate_max_ndvi = function(county_year) {
max_ndvi <- county_year[which.max(county_year$NDVI), ]
max_ndvi$NDVI <- max_ndvi$NDVI / 10000
return(max_ndvi)
}
results <- map(years_geoid_df, calculate_max_ndvi)
results <- bind_rows(results)
selected_counties <- results %>%
group_by(GEOID) %>%
summarise(n=n()) %>% filter(n==13)
results_full_history <- results %>%
filter(GEOID %in% selected_counties$GEOID)
write_csv(results_full_history, file_path_write)
## Test max NDVI
mod <- lm(yield ~ NDVI + I(NDVI^2) + GEOID,data=results_full_history)
summary(mod)
## Soy 250-0.7713, 500-0.7654, 1km-0.7556
## Corn 250-0.7854, 500-0.7815, 1km- 0.7629
## Winter Wheat 250- 0.7908, 500-0.7927, 1km-0.8142
## Spring Wheat 250-0.4223, 500-0.3721, 1km-0.3202
library(tidyverse)
## Insert your file path to the data from your local computer
## Set wd using setwd('path) /Users/uofm_research/Rprojects/integrationNDVI/
file_path_read = './df250mCorn.csv'
file_path_write = './CornMaxNDVI.csv'
df <- read_csv(file_path_read)
df$date <- as.Date(with(df, paste(Year, Month, Day,sep="-")), "%Y-%m-%d")
df <- df %>% filter(Year > 2005)
years_geoid_df <- group_split(df, Year, GEOID)
years_geoid_df
